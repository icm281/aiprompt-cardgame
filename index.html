<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>AI 提示詞抽卡遊戲</title>
  <style>
    body { background-color: #fdf6fa; font-family: "Noto Sans TC", sans-serif; text-align: center; padding: 30px; }
    h1 { color: #c25299; }
    .card-area { display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin: 20px 0; }
    .card-block { width: 260px; }
    .card-block h2 { font-size: 20px; margin-bottom: 10px; color: #7c3a8f; }
    .card {
      width: 100%; height: 180px; border: 3px dashed #d199d1; border-radius: 10px;
      background-size: contain; background-repeat: no-repeat; background-position: center;
      margin-bottom: 10px; display: flex; align-items: center; justify-content: center;
      font-size: 16px; color: #999;
    }
    .flip { animation: flip 0.6s ease-in-out; }
    @keyframes flip {
      0% { transform: rotateY(0); }
      50% { transform: rotateY(90deg); }
      100% { transform: rotateY(0); }
    }
    button {
      background-color: #ffb3e0; border: none; padding: 10px 16px;
      border-radius: 8px; color: white; font-size: 16px; cursor: pointer;
    }
    button:hover { background-color: #ff86cd; }
    #result, #spell { margin-top: 30px; font-size: 18px; color: #333; }
    #spell { font-weight: bold; color: #b6479c; font-size: 20px; }
  </style>
</head>
<body>
  <h1>🎴 Chat GPT生成圖【魔法咒語】抽卡小遊戲 🎴</h1>
  <div class="card-area">
    <div class="card-block">
      <h2>🤴🏻 人物卡</h2>
      <div id="card-character" class="card">請點選下方抽卡</div>
      <button onclick="drawCard('character')">抽卡！</button>
    </div>
    <div class="card-block">
      <h2>🏞️ 位置卡</h2>
      <div id="card-location" class="card">請點選下方抽卡</div>
      <button onclick="drawCard('location')">抽卡！</button>
    </div>
    <div class="card-block">
      <h2>🕺 動作卡</h2>
      <div id="card-action" class="card">請點選下方抽卡</div>
      <button onclick="drawCard('action')">抽卡！</button>
    </div>
    <div class="card-block">
      <h2>🎨 畫風卡</h2>
      <div id="card-paint" class="card">請點選下方抽卡</div>
      <button onclick="drawCard('paint')">抽卡！</button>
    </div>
  </div>

  <div id="spell"></div>
  <div id="result"></div>

  <script>
    const characterLabels = [
      "一隻可愛的柴犬", "一隻胖胖的貓", "一位公主", "一個喜歡畫畫的男孩",
      "一隻白白的兔子", "一位四周都是書的魔法師", "一隻綠色的青蛙"
    ];
    const locationLabels = [
      "在櫻花飄落的公園", "在糖果屋門前", "在宇宙的星球上", "在夜晚的森林裡",
      "在雲朵中的城堡裡", "在雪地中的帳篷裡", "在開滿花朵的花園", "在沙灘上的城堡裡"
    ];
    const actionLabels = [
      "坐在鞦韆上", "拿著冰淇淋", "看著天空", "跳舞", "睡覺", "奔跑", "騎車"
    ];
    const paintLabels = [
      "Q版", "日系少女漫畫風", "手繪水彩風", "韓系漫畫風",
      "剪貼畫風", "浮世繪風", "像素藝術風", "繪本風"
    ];

    const categories = {
      "character": Array.from({ length: 7 }, (_, i) => [`image/character/${i+1}.png`, characterLabels[i]]),
      "location": Array.from({ length: 8 }, (_, i) => [`image/location/${i+1}.png`, locationLabels[i]]),
      "action": Array.from({ length: 7 }, (_, i) => [`image/action/${i+1}.png`, actionLabels[i]]),
      "paint": Array.from({ length: 8 }, (_, i) => [`image/paint/${i+1}.png`, paintLabels[i]])
    };

    const selected = {};

    function drawCard(category) {
      const list = categories[category];
      const index = Math.floor(Math.random() * list.length);
      const [img, label] = list[index];
      selected[category] = { img, label };

      const cardId = "card-" + category;
      const cardEl = document.getElementById(cardId);
      cardEl.classList.remove("flip");
      void cardEl.offsetWidth;
      cardEl.classList.add("flip");
      setTimeout(() => {
        cardEl.style.backgroundImage = `url('${img}')`;
        cardEl.textContent = "";
      }, 300);

      updateResult();
    }

    function updateResult() {
      if (selected.character && selected.location && selected.action && selected.paint) {
        const ch = selected.character.label;
        const loc = selected.location.label;
        const act = selected.action.label;
        const style = selected.paint.label;

        const spell = `咒語組合：${ch}＋${loc}＋${act}＋${style}`;
        const sentence = `✨ 請幫我依據以下句子產生一張具有${style}的圖片。${loc}有${ch}${act}。`;

        document.getElementById("spell").innerText = spell;
        document.getElementById("result").innerText = sentence;
      }
    }
  </script>
</body>
</html>